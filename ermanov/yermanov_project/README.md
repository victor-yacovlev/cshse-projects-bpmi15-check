Веб-сервер с функциональностью CGI
===================================

Ерманов Данат БПМИ153
------------------------




  `Веб-сервер` - это основа интернета. Он поддерживает взаимосвяз пользователся с клиентом. И под клиентом подразумевается 
не только пользователь за веб-браузером, а разнообразные программы, самостоятельно обращающиеся к веб-серверам для 
получения обновлений или другой информации. 

Соотвественно для различных целей, бывают разные веб-сервера. 
Например, от некоторых серверов требуется поддержка одновременного подключения множества пользователей, 
ведение журнала обращений пользователей к ресурсам, аутентификация и авторизация пользователей.

В нашем случае мы расматриваем `CGI`, один из самых распространенных интерфейсов межпроцессного взаимодействия.
Его можно написать практическо на любом языке, при простом взаимодействие: клиент получает от сервера и отдает 
серверу данные через стандартные stdin и stdout. CGI в основном используется для создания динамических сайтов. 
Простота его написания и практика материала АКОСА делает его актуальным для выполнения на данный момент.

---

# Реализовано: 

 * веб-сервер, который умеет выдавать статические страницы и обслуживать одновременно несколько подключений;
 * помимо выдачи статического содержимого, сервер умеет выполнять сторонние программы и выдавать результат их работы;
 * реализована поддержка POST-запросов;
  
    Сначало создается сокет для приема данных. Запускается очередь для приема входящих соединений от разных 
процессов на заданный порт. При очередном поступившем запросе, начинается обрабатываться этот процесс.
Создается сокет клиента, считывается данные запроса. Распарсиваются данные. Пока что предполагается, что в запросе
находися только имя команды, файла и одна переменная окружения(count=). Дальше в зависимости от команды, идет её выполнение. 

Для команды GET, проверяется наличие нужного файла и в зависимости от результата, печатается: либо сообщение об 
ошибке(файл не найден), либо содержимое файла, либо файл запускается, если он исполняемый.
Для POST происходит аналогичный процес, за сиключением того что поток ввода перенаправляется на исполняемый файл.
Далее мы закрываем клиентский сокет и переходим обратно к очереди для ожидаения дальнейших запросов.

---

# Инструкция для запуска и работы с сервером
1. Для использования сервера, достаочно скомпилировать файл main.c и запустить запустить записав в 
аргументы: директорию с файлами, номер порта(например: 60000). Для добавления новых команд, 
основные изменения коснуться функции парсинга входных данных parse_command. 
2. Для подключения к (локальному)серверу, достаточно в терминале вбить следующую команду: telenet 127.0.0.1 $port$.
Т.е. вы должны так же указать ip-адресс вешего компьютера и порт на который сервер принимает данные
(он задается при запуске сервера, пример: 60000). 
3. Далее вы можете вбить команду GET file?count=число, с нужным вам файлом. Если такого файла не существует, выведется сообщение 
об ошибке. Если вы не вбили им файла, то по умолчанию, это будет считаться файл index.html. Если файл исполняемый, то на выводе
вы получите числа от 1 до значения каунт(при условии запуска файла try.out). 
4. При выполнении команды POST file?count=число, срипт запросит у вас count чисел и вернет вам их сумму.
(при условии запуска файла try2.out).
5. Для завершения работы нажмите ctrl+c. 

---
